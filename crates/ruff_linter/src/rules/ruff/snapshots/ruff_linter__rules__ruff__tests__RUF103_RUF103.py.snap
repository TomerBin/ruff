---
source: crates/ruff_linter/src/rules/ruff/mod.rs
---
RUF103.py:10:5: RUF103 [*] FastAPI dependency without Annotated
   |
 8 | @app.get("/items/")
 9 | def get_items(
10 |     current_user: User = Depends(get_current_user),
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ RUF103
11 |     some_security_param: str = Security(get_oauth2_user),
12 | ):
   |
   = help: Replace with `current_user: Annotated[User, Depends(get_current_user)]`

ℹ Unsafe fix
   1  |+from typing import Annotated
1  2  | from fastapi import FastAPI, APIRouter, Query, Path, Body, Cookie, Header, File, Form, Depends, Security
2  3  | from pydantic import BaseModel
3  4  | 
--------------------------------------------------------------------------------
7  8  | # Errors.
8  9  | @app.get("/items/")
9  10 | def get_items(
10    |-    current_user: User = Depends(get_current_user),
   11 |+    current_user: Annotated[User, Depends(get_current_user)],
11 12 |     some_security_param: str = Security(get_oauth2_user),
12 13 | ):
13 14 |     pass

RUF103.py:11:5: RUF103 [*] FastAPI dependency without Annotated
   |
 9 | def get_items(
10 |     current_user: User = Depends(get_current_user),
11 |     some_security_param: str = Security(get_oauth2_user),
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ RUF103
12 | ):
13 |     pass
   |
   = help: Replace with `some_security_param: Annotated[str, Security(get_oauth2_user)]`

ℹ Unsafe fix
   1  |+from typing import Annotated
1  2  | from fastapi import FastAPI, APIRouter, Query, Path, Body, Cookie, Header, File, Form, Depends, Security
2  3  | from pydantic import BaseModel
3  4  | 
--------------------------------------------------------------------------------
8  9  | @app.get("/items/")
9  10 | def get_items(
10 11 |     current_user: User = Depends(get_current_user),
11    |-    some_security_param: str = Security(get_oauth2_user),
   12 |+    some_security_param: Annotated[str, Security(get_oauth2_user)],
12 13 | ):
13 14 |     pass
14 15 | 

RUF103.py:17:5: RUF103 [*] FastAPI dependency without Annotated
   |
15 | @app.post("/stuff/")
16 | def do_stuff(
17 |     some_query_param: str | None = Query(default=None),
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ RUF103
18 |     some_path_param: str = Path(),
19 |     some_body_param: str = Body("foo"),
   |
   = help: Replace with `some_query_param: Annotated[str | None, Query(default=None)]`

ℹ Unsafe fix
   1  |+from typing import Annotated
1  2  | from fastapi import FastAPI, APIRouter, Query, Path, Body, Cookie, Header, File, Form, Depends, Security
2  3  | from pydantic import BaseModel
3  4  | 
--------------------------------------------------------------------------------
14 15 | 
15 16 | @app.post("/stuff/")
16 17 | def do_stuff(
17    |-    some_query_param: str | None = Query(default=None),
   18 |+    some_query_param: Annotated[str | None, Query(default=None)],
18 19 |     some_path_param: str = Path(),
19 20 |     some_body_param: str = Body("foo"),
20 21 |     some_cookie_param: str = Cookie(),

RUF103.py:18:5: RUF103 [*] FastAPI dependency without Annotated
   |
16 | def do_stuff(
17 |     some_query_param: str | None = Query(default=None),
18 |     some_path_param: str = Path(),
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ RUF103
19 |     some_body_param: str = Body("foo"),
20 |     some_cookie_param: str = Cookie(),
   |
   = help: Replace with `some_path_param: Annotated[str, Path()]`

ℹ Unsafe fix
   1  |+from typing import Annotated
1  2  | from fastapi import FastAPI, APIRouter, Query, Path, Body, Cookie, Header, File, Form, Depends, Security
2  3  | from pydantic import BaseModel
3  4  | 
--------------------------------------------------------------------------------
15 16 | @app.post("/stuff/")
16 17 | def do_stuff(
17 18 |     some_query_param: str | None = Query(default=None),
18    |-    some_path_param: str = Path(),
   19 |+    some_path_param: Annotated[str, Path()],
19 20 |     some_body_param: str = Body("foo"),
20 21 |     some_cookie_param: str = Cookie(),
21 22 |     some_header_param: int = Header(default=5),

RUF103.py:19:5: RUF103 [*] FastAPI dependency without Annotated
   |
17 |     some_query_param: str | None = Query(default=None),
18 |     some_path_param: str = Path(),
19 |     some_body_param: str = Body("foo"),
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ RUF103
20 |     some_cookie_param: str = Cookie(),
21 |     some_header_param: int = Header(default=5),
   |
   = help: Replace with `some_body_param: Annotated[str, Body("foo")]`

ℹ Unsafe fix
   1  |+from typing import Annotated
1  2  | from fastapi import FastAPI, APIRouter, Query, Path, Body, Cookie, Header, File, Form, Depends, Security
2  3  | from pydantic import BaseModel
3  4  | 
--------------------------------------------------------------------------------
16 17 | def do_stuff(
17 18 |     some_query_param: str | None = Query(default=None),
18 19 |     some_path_param: str = Path(),
19    |-    some_body_param: str = Body("foo"),
   20 |+    some_body_param: Annotated[str, Body("foo")],
20 21 |     some_cookie_param: str = Cookie(),
21 22 |     some_header_param: int = Header(default=5),
22 23 |     some_file_param: UploadFile = File(),

RUF103.py:20:5: RUF103 [*] FastAPI dependency without Annotated
   |
18 |     some_path_param: str = Path(),
19 |     some_body_param: str = Body("foo"),
20 |     some_cookie_param: str = Cookie(),
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ RUF103
21 |     some_header_param: int = Header(default=5),
22 |     some_file_param: UploadFile = File(),
   |
   = help: Replace with `some_cookie_param: Annotated[str, Cookie()]`

ℹ Unsafe fix
   1  |+from typing import Annotated
1  2  | from fastapi import FastAPI, APIRouter, Query, Path, Body, Cookie, Header, File, Form, Depends, Security
2  3  | from pydantic import BaseModel
3  4  | 
--------------------------------------------------------------------------------
17 18 |     some_query_param: str | None = Query(default=None),
18 19 |     some_path_param: str = Path(),
19 20 |     some_body_param: str = Body("foo"),
20    |-    some_cookie_param: str = Cookie(),
   21 |+    some_cookie_param: Annotated[str, Cookie()],
21 22 |     some_header_param: int = Header(default=5),
22 23 |     some_file_param: UploadFile = File(),
23 24 |     some_form_param: str = Form(),

RUF103.py:21:5: RUF103 [*] FastAPI dependency without Annotated
   |
19 |     some_body_param: str = Body("foo"),
20 |     some_cookie_param: str = Cookie(),
21 |     some_header_param: int = Header(default=5),
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ RUF103
22 |     some_file_param: UploadFile = File(),
23 |     some_form_param: str = Form(),
   |
   = help: Replace with `some_header_param: Annotated[int, Header(default=5)]`

ℹ Unsafe fix
   1  |+from typing import Annotated
1  2  | from fastapi import FastAPI, APIRouter, Query, Path, Body, Cookie, Header, File, Form, Depends, Security
2  3  | from pydantic import BaseModel
3  4  | 
--------------------------------------------------------------------------------
18 19 |     some_path_param: str = Path(),
19 20 |     some_body_param: str = Body("foo"),
20 21 |     some_cookie_param: str = Cookie(),
21    |-    some_header_param: int = Header(default=5),
   22 |+    some_header_param: Annotated[int, Header(default=5)],
22 23 |     some_file_param: UploadFile = File(),
23 24 |     some_form_param: str = Form(),
24 25 | ):

RUF103.py:22:5: RUF103 [*] FastAPI dependency without Annotated
   |
20 |     some_cookie_param: str = Cookie(),
21 |     some_header_param: int = Header(default=5),
22 |     some_file_param: UploadFile = File(),
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ RUF103
23 |     some_form_param: str = Form(),
24 | ):
   |
   = help: Replace with `some_file_param: Annotated[UploadFile, File()]`

ℹ Unsafe fix
   1  |+from typing import Annotated
1  2  | from fastapi import FastAPI, APIRouter, Query, Path, Body, Cookie, Header, File, Form, Depends, Security
2  3  | from pydantic import BaseModel
3  4  | 
--------------------------------------------------------------------------------
19 20 |     some_body_param: str = Body("foo"),
20 21 |     some_cookie_param: str = Cookie(),
21 22 |     some_header_param: int = Header(default=5),
22    |-    some_file_param: UploadFile = File(),
   23 |+    some_file_param: Annotated[UploadFile, File()],
23 24 |     some_form_param: str = Form(),
24 25 | ):
25 26 |     # do stuff

RUF103.py:23:5: RUF103 [*] FastAPI dependency without Annotated
   |
21 |     some_header_param: int = Header(default=5),
22 |     some_file_param: UploadFile = File(),
23 |     some_form_param: str = Form(),
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ RUF103
24 | ):
25 |     # do stuff
   |
   = help: Replace with `some_form_param: Annotated[str, Form()]`

ℹ Unsafe fix
   1  |+from typing import Annotated
1  2  | from fastapi import FastAPI, APIRouter, Query, Path, Body, Cookie, Header, File, Form, Depends, Security
2  3  | from pydantic import BaseModel
3  4  | 
--------------------------------------------------------------------------------
20 21 |     some_cookie_param: str = Cookie(),
21 22 |     some_header_param: int = Header(default=5),
22 23 |     some_file_param: UploadFile = File(),
23    |-    some_form_param: str = Form(),
   24 |+    some_form_param: Annotated[str, Form()],
24 25 | ):
25 26 |     # do stuff
26 27 |     pass
