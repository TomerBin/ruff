---
source: crates/ruff_linter/src/rules/ruff/mod.rs
---
RUF103.py:24:5: RUF103 [*] FastAPI dependency without Annotated
   |
22 | @app.get("/items/")
23 | def get_items(
24 |     current_user: User = Depends(get_current_user),
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ RUF103
25 |     some_security_param: str = Security(get_oauth2_user),
26 | ):
   |
   = help: Replace with `current_user: Annotated[User, Depends(get_current_user)]`

ℹ Unsafe fix
   1  |+from typing import Annotated
1  2  | from fastapi import (
2  3  |     FastAPI,
3  4  |     APIRouter,
--------------------------------------------------------------------------------
21 22 | 
22 23 | @app.get("/items/")
23 24 | def get_items(
24    |-    current_user: User = Depends(get_current_user),
   25 |+    current_user: Annotated[User, Depends(get_current_user)],
25 26 |     some_security_param: str = Security(get_oauth2_user),
26 27 | ):
27 28 |     pass

RUF103.py:25:5: RUF103 [*] FastAPI dependency without Annotated
   |
23 | def get_items(
24 |     current_user: User = Depends(get_current_user),
25 |     some_security_param: str = Security(get_oauth2_user),
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ RUF103
26 | ):
27 |     pass
   |
   = help: Replace with `some_security_param: Annotated[str, Security(get_oauth2_user)]`

ℹ Unsafe fix
   1  |+from typing import Annotated
1  2  | from fastapi import (
2  3  |     FastAPI,
3  4  |     APIRouter,
--------------------------------------------------------------------------------
22 23 | @app.get("/items/")
23 24 | def get_items(
24 25 |     current_user: User = Depends(get_current_user),
25    |-    some_security_param: str = Security(get_oauth2_user),
   26 |+    some_security_param: Annotated[str, Security(get_oauth2_user)],
26 27 | ):
27 28 |     pass
28 29 | 

RUF103.py:32:5: RUF103 [*] FastAPI dependency without Annotated
   |
30 | @app.post("/stuff/")
31 | def do_stuff(
32 |     some_query_param: str | None = Query(default=None),
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ RUF103
33 |     some_path_param: str = Path(),
34 |     some_body_param: str = Body("foo"),
   |
   = help: Replace with `some_query_param: Annotated[str | None, Query(default=None)]`

ℹ Unsafe fix
   1  |+from typing import Annotated
1  2  | from fastapi import (
2  3  |     FastAPI,
3  4  |     APIRouter,
--------------------------------------------------------------------------------
29 30 | 
30 31 | @app.post("/stuff/")
31 32 | def do_stuff(
32    |-    some_query_param: str | None = Query(default=None),
   33 |+    some_query_param: Annotated[str | None, Query(default=None)],
33 34 |     some_path_param: str = Path(),
34 35 |     some_body_param: str = Body("foo"),
35 36 |     some_cookie_param: str = Cookie(),

RUF103.py:33:5: RUF103 [*] FastAPI dependency without Annotated
   |
31 | def do_stuff(
32 |     some_query_param: str | None = Query(default=None),
33 |     some_path_param: str = Path(),
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ RUF103
34 |     some_body_param: str = Body("foo"),
35 |     some_cookie_param: str = Cookie(),
   |
   = help: Replace with `some_path_param: Annotated[str, Path()]`

ℹ Unsafe fix
   1  |+from typing import Annotated
1  2  | from fastapi import (
2  3  |     FastAPI,
3  4  |     APIRouter,
--------------------------------------------------------------------------------
30 31 | @app.post("/stuff/")
31 32 | def do_stuff(
32 33 |     some_query_param: str | None = Query(default=None),
33    |-    some_path_param: str = Path(),
   34 |+    some_path_param: Annotated[str, Path()],
34 35 |     some_body_param: str = Body("foo"),
35 36 |     some_cookie_param: str = Cookie(),
36 37 |     some_header_param: int = Header(default=5),

RUF103.py:34:5: RUF103 [*] FastAPI dependency without Annotated
   |
32 |     some_query_param: str | None = Query(default=None),
33 |     some_path_param: str = Path(),
34 |     some_body_param: str = Body("foo"),
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ RUF103
35 |     some_cookie_param: str = Cookie(),
36 |     some_header_param: int = Header(default=5),
   |
   = help: Replace with `some_body_param: Annotated[str, Body("foo")]`

ℹ Unsafe fix
   1  |+from typing import Annotated
1  2  | from fastapi import (
2  3  |     FastAPI,
3  4  |     APIRouter,
--------------------------------------------------------------------------------
31 32 | def do_stuff(
32 33 |     some_query_param: str | None = Query(default=None),
33 34 |     some_path_param: str = Path(),
34    |-    some_body_param: str = Body("foo"),
   35 |+    some_body_param: Annotated[str, Body("foo")],
35 36 |     some_cookie_param: str = Cookie(),
36 37 |     some_header_param: int = Header(default=5),
37 38 |     some_file_param: UploadFile = File(),

RUF103.py:35:5: RUF103 [*] FastAPI dependency without Annotated
   |
33 |     some_path_param: str = Path(),
34 |     some_body_param: str = Body("foo"),
35 |     some_cookie_param: str = Cookie(),
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ RUF103
36 |     some_header_param: int = Header(default=5),
37 |     some_file_param: UploadFile = File(),
   |
   = help: Replace with `some_cookie_param: Annotated[str, Cookie()]`

ℹ Unsafe fix
   1  |+from typing import Annotated
1  2  | from fastapi import (
2  3  |     FastAPI,
3  4  |     APIRouter,
--------------------------------------------------------------------------------
32 33 |     some_query_param: str | None = Query(default=None),
33 34 |     some_path_param: str = Path(),
34 35 |     some_body_param: str = Body("foo"),
35    |-    some_cookie_param: str = Cookie(),
   36 |+    some_cookie_param: Annotated[str, Cookie()],
36 37 |     some_header_param: int = Header(default=5),
37 38 |     some_file_param: UploadFile = File(),
38 39 |     some_form_param: str = Form(),

RUF103.py:36:5: RUF103 [*] FastAPI dependency without Annotated
   |
34 |     some_body_param: str = Body("foo"),
35 |     some_cookie_param: str = Cookie(),
36 |     some_header_param: int = Header(default=5),
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ RUF103
37 |     some_file_param: UploadFile = File(),
38 |     some_form_param: str = Form(),
   |
   = help: Replace with `some_header_param: Annotated[int, Header(default=5)]`

ℹ Unsafe fix
   1  |+from typing import Annotated
1  2  | from fastapi import (
2  3  |     FastAPI,
3  4  |     APIRouter,
--------------------------------------------------------------------------------
33 34 |     some_path_param: str = Path(),
34 35 |     some_body_param: str = Body("foo"),
35 36 |     some_cookie_param: str = Cookie(),
36    |-    some_header_param: int = Header(default=5),
   37 |+    some_header_param: Annotated[int, Header(default=5)],
37 38 |     some_file_param: UploadFile = File(),
38 39 |     some_form_param: str = Form(),
39 40 | ):

RUF103.py:37:5: RUF103 [*] FastAPI dependency without Annotated
   |
35 |     some_cookie_param: str = Cookie(),
36 |     some_header_param: int = Header(default=5),
37 |     some_file_param: UploadFile = File(),
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ RUF103
38 |     some_form_param: str = Form(),
39 | ):
   |
   = help: Replace with `some_file_param: Annotated[UploadFile, File()]`

ℹ Unsafe fix
   1  |+from typing import Annotated
1  2  | from fastapi import (
2  3  |     FastAPI,
3  4  |     APIRouter,
--------------------------------------------------------------------------------
34 35 |     some_body_param: str = Body("foo"),
35 36 |     some_cookie_param: str = Cookie(),
36 37 |     some_header_param: int = Header(default=5),
37    |-    some_file_param: UploadFile = File(),
   38 |+    some_file_param: Annotated[UploadFile, File()],
38 39 |     some_form_param: str = Form(),
39 40 | ):
40 41 |     # do stuff

RUF103.py:38:5: RUF103 [*] FastAPI dependency without Annotated
   |
36 |     some_header_param: int = Header(default=5),
37 |     some_file_param: UploadFile = File(),
38 |     some_form_param: str = Form(),
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ RUF103
39 | ):
40 |     # do stuff
   |
   = help: Replace with `some_form_param: Annotated[str, Form()]`

ℹ Unsafe fix
   1  |+from typing import Annotated
1  2  | from fastapi import (
2  3  |     FastAPI,
3  4  |     APIRouter,
--------------------------------------------------------------------------------
35 36 |     some_cookie_param: str = Cookie(),
36 37 |     some_header_param: int = Header(default=5),
37 38 |     some_file_param: UploadFile = File(),
38    |-    some_form_param: str = Form(),
   39 |+    some_form_param: Annotated[str, Form()],
39 40 | ):
40 41 |     # do stuff
41 42 |     pass
